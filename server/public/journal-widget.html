<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <title>Journal Coach (dev)</title>
    <style>
      :root { font-family: system-ui, -apple-system, "Segoe UI", sans-serif; }
      body { margin: 0; padding: 12px; }
      pre { background: #f6f6f6; padding: 12px; border-radius: 8px; overflow: auto; }
      button { padding: 8px 10px; }
      .row { display: flex; gap: 8px; align-items: center; margin-bottom: 10px; }
      .muted { opacity: 0.7; font-size: 12px; }
    </style>
  </head>
  <body>
    <div class="row">
      <button id="reload">load_dashboard</button>
      <div class="muted">toolOutput をそのまま表示（仮UI）</div>
    </div>

    <pre id="out"></pre>

    <script type="module">
      const out = document.getElementById("out");
      const btn = document.getElementById("reload");

      function render() {
        const data = window.openai?.toolOutput ?? { note: "toolOutput is empty yet" };
        out.textContent = JSON.stringify(data, null, 2);
      }

      btn.addEventListener("click", async () => {
        if (!window.openai?.callTool) return;
        await window.openai.callTool("load_dashboard", {});
        // toolOutput更新はホスト側がやる前提（openai:set_globals）
        render();
      });

      render();
    </script>
  </body>
</html>
